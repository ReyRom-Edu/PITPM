–í Postman –º–æ–¥—É–ª—å **`pm.test`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è **—Ç–µ—Å—Ç–æ–≤** (—Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏), –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞. –≠—Ç–æ —á–∞—Å—Ç—å Postman Sandbox API, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—Ç–≤–µ—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–∞, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Å—Ç–∞—Ç—É—Å–æ–º –∏ —Ç.–¥.

–í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ **–±–∞–∑–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π `pm.test`** üëá

---

## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ `pm.test`

`pm.test(name, function)` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è **–æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞**.
–û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:

* **`name`** ‚Äî —Å—Ç—Ä–æ–∫—É —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–∞;
* **`function`** ‚Äî –∫–æ–¥, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –ø—Ä–æ–≤–µ—Ä–∫—É.

–ü—Ä–∏–º–µ—Ä:

```js
pm.test("–°—Ç–∞—Ç—É—Å –∫–æ–¥ 200", function () {
    pm.response.to.have.status(200);
});
```

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ `pm.expect` –∏ `pm.response`

Postman –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É **Chai** (BDD-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å `expect`) –¥–ª—è —É–¥–æ–±–Ω—ã—Ö –∞—Å—Å–µ—Ä—Ç–æ–≤.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```js
pm.test("–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç", function () {
    pm.response.to.have.status(200);
});
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

```js
pm.test("–û—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON", function () {
    pm.response.to.be.json;
});
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞

```js
pm.test("–°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ success", function () {
    const json = pm.response.json();
    pm.expect(json).to.have.property("success", true);
});
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

```js
pm.test("Content-Type = application/json", function () {
    pm.response.to.have.header("Content-Type", "application/json");
});
```

---

## üîπ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pm.expect`

`pm.expect()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª—é–±—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (–Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç–∞).

–ü—Ä–∏–º–µ—Ä:

```js
pm.test("–ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π", function () {
    pm.expect(pm.environment.get("token")).to.not.be.undefined;
});
```

–ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, –º–∞—Å—Å–∏–≤—ã, –∏ —Ç.–¥.:

```js
pm.test("–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞", function () {
    const data = pm.response.json().items;
    pm.expect(data.length).to.be.above(0);
});
```

---

## üîπ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫

–ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å—Å–µ—Ä—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

```js
pm.test("–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–ª–æ –∏ –∫–æ–¥", function () {
    pm.response.to.have.status(200);
    const body = pm.response.json();
    pm.expect(body.success).to.eql(true);
});
```

---

## üîπ –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

Postman –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```js
const data = pm.response.json();
pm.environment.set("userId", data.id);
```

–ò —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö:

```js
pm.test("userId —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω", function () {
    pm.expect(pm.environment.get("userId")).to.exist;
});
```

---

## üîπ –ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞

```js
pm.test("–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –º–µ–Ω—å—à–µ 500 –º—Å", function () {
    pm.expect(pm.response.responseTime).to.be.below(500);
});
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–µ–ª–µ

```js
pm.test("–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 'OK'", function () {
    pm.expect(pm.response.text()).to.include("OK");
});
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Å–∏–≤–∞

```js
pm.test("–ú–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç", function () {
    const arr = pm.response.json().items;
    pm.expect(arr).to.be.an("array").that.is.not.empty;
});
```

---

## üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã `pm`

| –û–±—ä–µ–∫—Ç           | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
| ---------------- | ---------------------------------------- |
| `pm.response`    | –î–æ—Å—Ç—É–ø –∫ –æ—Ç–≤–µ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞                  |
| `pm.request`     | –î–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞                           |
| `pm.environment` | –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è           |
| `pm.globals`     | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ                    |
| `pm.variables`   | –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º) |
| `pm.info`        | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏ —Ç.–¥.  |

---

## üîπ –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```js
pm.test("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", function () {
    pm.response.to.have.status(201);
    pm.response.to.be.json;

    const body = pm.response.json();
    pm.expect(body).to.have.property("id");
    pm.expect(body.name).to.eql("Roman");
    pm.environment.set("createdUserId", body.id);
});
```

---

## üîπ –†–µ–∑—é–º–µ

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å          | –ü—Ä–∏–º–µ—Ä                                                 |
| -------------------- | ------------------------------------------------------ |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞     | `pm.response.to.have.status(200)`                      |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞     | `pm.response.to.be.json`                               |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞   | `pm.response.to.have.header("Content-Type")`           |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–∞        | `pm.expect(pm.response.json().ok).to.eql(true)`        |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏    | `pm.expect(pm.response.responseTime).to.be.below(300)` |
| –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ | `pm.environment.set("token", value)`                   |

---

–•–æ—á–µ—à—å, —è –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é **—Ç–∞–±–ª–∏—Ü—É-—à–ø–∞—Ä–≥–∞–ª–∫—É** –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º `pm.test` –∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –∞—Å—Å–µ—Ä—Ç–∞–º (`to.have.status`, `to.be.json`, `pm.expect(...)`, –∏ —Ç.–¥.) ‚Äî –≤ –≤–∏–¥–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ cheat sheet –¥–ª—è –ø–µ—á–∞—Ç–∏?
